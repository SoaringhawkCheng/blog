---
title: 「图解TCP/IP」学习笔记[DOING]
catalog: true
date: 2019-02-19 20:39:21
subtitle:
header-img:
tags:
- net
categories:
- 工程
---
> 书籍豆瓣链接：[《图解TCP/IP》](https://book.douban.com/subject/24737674/)
>
> 开始学习时间：
> 
> 预计完成时间：
>
> 实际完成日期：

# 网络基础知识

## OSI参考模型


上下层之间进行交互遵循的约定叫接口 同一层之间的交互遵循的约定叫协议

* 应用层

```
针对特定应用的协议
```

* 表示层

```
设备固有数据格式和网络标准数据格式的转换
```

* 会话层

```
通信管理，决定连接建立和断开的时机。在数据前端附加首部和标签信息，记录数据传达顺序的信息
```

* 传输层

```
处理连接建立和断开，保证端对端数据传输可靠性
```

* 网络层

```
寻址和路由选择，负责将数据发送至最终目标地址
```

* 数据链路层

```
互联设备之间传送和识别数据帧，在数据中添加包含mac地址信息的首部，负责传输介质互联的设备之间的数据处理
```

* 物理层

```
物理信号与模拟信号之间的转换
```

## 

# TCP IP基础知识

# 数据链路

# IP协议相关技术



# 

# 


ARP/RARP协议

```
地址解析协议，即ARP（Address Resolution Protocol），是根据IP地址获取物理地址的一个TCP/IP协议。主机发送信息时将包含目标IP地址的ARP请求广播到网络上的所有主机，并接收返回消息，以此确定目标的物理地址；收到返回消息后将该IP地址和物理地址存入本机ARP缓存中并保留一定时间，下次请求时直接查询ARP缓存以节约资源。地址解析协议是建立在网络中各个主机互相信任的基础上的，网络上的主机可以自主发送ARP应答消息，其他主机收到应答报文时不会检测该报文的真实性就会将其记入本机ARP缓存；由此***者就可以向某一主机发送伪ARP应答报文，使其发送的信息无法到达预期的主机或到达错误的主机，这就构成了一个ARP欺骗。ARP命令可用于查询本机ARP缓存中IP地址和MAC地址的对应关系、添加或删除静态对应关系等。

　　ARP工作流程举例：

　　主机A的IP地址为192.168.1.1，MAC地址为0A-11-22-33-44-01；
　　主机B的IP地址为192.168.1.2，MAC地址为0A-11-22-33-44-02；
　　当主机A要与主机B通信时，地址解析协议可以将主机B的IP地址（192.168.1.2）解析成主机B的MAC地址，以下为工作流程：
　　（1）根据主机A上的路由表内容，IP确定用于访问主机B的转发IP地址是192.168.1.2。然后A主机在自己的本地ARP缓存中检查主机B的匹配MAC地址。
　　（2）如果主机A在ARP缓存中没有找到映射，它将询问192.168.1.2的硬件地址，从而将ARP请求帧广播到本地网络上的所有主机。源主机A的IP地址和MAC地址都包括在ARP请求中。本地网络上的每台主机都接收到ARP请求并且检查是否与自己的IP地址匹配。如果主机发现请求的IP地址与自己的IP地址不匹配，它将丢弃ARP请求。
　　（3）主机B确定ARP请求中的IP地址与自己的IP地址匹配，则将主机A的IP地址和MAC地址映射添加到本地ARP缓存中。
　　（4）主机B将包含其MAC地址的ARP回复消息直接发送回主机A。
　　（5）当主机A收到从主机B发来的ARP回复消息时，会用主机B的IP和MAC地址映射更新ARP缓存。本机缓存是有生存期的，生存期结束后，将再次重复上面的过程。主机B的MAC地址一旦确定，主机A就能向主机B发送IP通信了。
　　逆地址解析协议，即RARP，功能和ARP协议相对，其将局域网中某个主机的物理地址转换为IP地址，比如局域网中有一台主机只知道物理地址而不知道IP地址，那么可以通过RARP协议发出征求自身IP地址的广播请求，然后由RARP服务器负责回答。

　　RARP协议工作流程：

　　（1）给主机发送一个本地的RARP广播，在此广播包中，声明自己的MAC地址并且请求任何收到此请求的RARP服务器分配一个IP地址；

　　（2）本地网段上的RARP服务器收到此请求后，检查其RARP列表，查找该MAC地址对应的IP地址；

　　（3）如果存在，RARP服务器就给源主机发送一个响应数据包并将此IP地址提供给对方主机使用；
　　（4）如果不存在，RARP服务器对此不做任何的响应；
　　（5）源主机收到从RARP服务器的响应信息，就利用得到的IP地址进行通讯；如果一直没有收到RARP服务器的响应信息，表示初始化失败。
```