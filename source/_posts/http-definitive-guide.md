---
title: 「HTTP权威指南」学习笔记[DOING]
catalog: true
date: 2020-05-31 19:22:48
subtitle:
header-img:
tags:
- net
categories:
- 工程
---
> 书籍豆瓣链接：[《HTTP权威指南》](https://book.douban.com/subject/10746113/)
> 
> 相关资料笔记：[《HTTP权威指南》概念手册](https://github.com/SoaringhawkCheng/http)
> 
> 开始学习时间：
> 
> 预计完成时间：
> 
> 实际完成时间：

# 前言

《HTTP权威指南》中的主要概念和内容都在[《HTTP权威指南》概念手册](https://github.com/SoaringhawkCheng/http)中，本笔记对部分知识点进行了提炼和补充

# 第一部分 HTTP基础

## 第1章 HTTP概述

### URI

有两个子集URL和URN，URL受路径变化影响，URN不会

### web结构组件

隧道 连接通道，http信道上发送非http协议资源

## 第2章 URL与资源

### url编码

为了避开安全字符集表示法带来的限制，使用编码机制，对不安全字符进行转义

## 第3章 HTTP报文

### 方法

HEAD 获取文档首部

TRACE 对可能经过代理服务器传送到服务器上的报文进行追踪

OPTIONS 请求服务器告知其支持什么功能

### 状态码

501 请求未实现

502 网关错误 表示作为网关或代理角色的服务器，从上游服务器中接收到的响应是无效的

503 服务器不可用

504 网关超时

505 HTTP版本不支持 服务器不支持请求中所使用的HTTP协议版本

### 首部

Cookie 客户端向服务器传送的cookie

Set-Cookie 服务器传送cookie给客户端

## 第4章 连接管理

### Connection首部

两个相邻的HTTP应用程序会为他们共享的连接应用一组选项，Connection首部字段中有一个逗号分隔的连接标签列表，为此连接指定了一些不会传播到其他连接的选项

### 串行连接

HTTP1.0的基本特点是：

1. 每来一个请求就开一个TCP连接，请求完了关闭连接
2. 

### 并行连接

同时开多个tcp连接，并行处理多个http事务。tcp连接会竞争带宽，大量连接会消耗很多内存资源

浏览器确实会使用并行连接，但是会将并行连接数限制为一个较小的值(通常是4个)

### 持久连接

* HTTP1.0

HTTP1.0设置了keepalive机制，来实现tcp连接的复用

Connection首部添加Keep-Alive，同一个四元组的tcp连接可以串行处理多个http事务

在HTTP响应报文中，返回一个Content-Length首部，告诉客户端单次请求的响应长度，与其他响应区分

使用Connection:Close在处理完请求后关闭持久连接

* HTTP1.1

HTTP1.1默认连接复用，除非显示加上Connection:Close属性

Content-Length首部的问题是，服务端需要计算响应包长度

HTTP1.1引入了chunk机制，将相应的body分块，块之间有分隔标记，使用Transfer-Encoding:chunked首部告诉客户端相应包含几个块

### 管道化连接

HTTP1.1在持久连接上引入了pipeline机制，发送完第一个请求，不必等响应到达就可以发送下一个

服务端必须按请求报文的顺序返回响应报文，即**队头阻塞**问题

* 二进制分帧

HTTP2为了解决**队头阻塞**，将TCP报文转换成二进制，并分成多个帧

每对请求和响应组成一个逻辑流，每个流的不同帧都带有流ID和帧ID

# 第二部分 HTTP结构

## 第5章 Web服务器

## 第6章 代理

## 第7章 缓存

## 第8章 集成电路：网关、隧道及中继

## 第9章 Web机器人

## 第10章 HTTP-NG

# 第三部分 识别、认证与安全

## 第11章 客户端识别与cookie机制

## 第12章 基本认证机制

## 第13章 摘要认证

## 第14章 安全HTTP

# 第四部分 实体、编码和国际化

## 第15章 实体和编码

## 第16章 国际化

## 第17章 内容协商与转码

# 第五部分 内容发布与分发

## 第18章 Web主机托管

## 第19章 发布系统

## 第20章 重定向与负载均衡

## 第21章 日志记录与使用情况跟踪

# 第六部分 附录